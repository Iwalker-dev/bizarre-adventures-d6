<form class="sheet actor-sheet {{cssClass}}" autocomplete="off" data-actor-id="{{actor.id}}">
  <div class="jojo-sheet">
    <header class="sheet-header">
      <div class="character-image-box">
        <img src="{{actor.img}}" data-edit="img" title="{{actor.name}}" />
      </div>
      <h1 class="sheet-header">
        <span class="name-display">{{actor.name}}</span>
        <input class="name-edit" value="{{actor.name}}" style="display:none;" />
        {{#ifEquals actor.system.bio.type "Act"}}
          <!-- single-digit input bound to system.info.actNumber -->
          <span class="act-label">Act:
            <input 
              type="text" 
              name="system.bio.actNumber" 
              value="{{actor.system.bio.actNumber}}" 
              maxlength="1" 
              size="1" 
              pattern="\d" 
              title="Enter a single digit (1–9)"
              style="width:1ch; padding:0 0.1ch; margin-left:0.5ch; text-align:center; font-size:inherit;"
            />
          </span>
        {{/ifEquals}}
      </h1>
    </header>

    <nav class="sheet-tabs tabs" data-group="primary">
      {{> actor-nav}}
    </nav>

    <section class="sheet-body">
      <!-- ─ Stats Tab ─ -->
      <div class="tab" data-tab="stats" data-group="primary">
        <div class="stats-and-chart">
          <div class="stat-list">
            {{> actor-stats}}
          </div>
          <div class="stand-chart-container">
            <canvas id="stand-stat-chart" width="300" height="300"></canvas>
          </div>
        </div>
      </div>

      <!-- ─ Stand Info Tab ─ -->
      <div class="tab" data-tab="info" data-group="primary">
        <div class="info-container">
          <div class="info-row">
            <label>Stand:</label>
            <input type="text"
                   name="system.bio.standName"
                   value="{{system.bio.standName}}"
                   placeholder="Enter stand name">
          </div>
            <div class="info-row" data-drop="ability">
            <label>Master:</label>
            {{#each linkedActors as |linked|}}
              <div class="linked-ability" data-uuid="{{linked.uuid}}">
                <span>{{linked.name}} ({{linked.type}})</span>
                <a class="remove-link" data-uuid="{{linked.uuid}}">
                  <i class="fas fa-times"></i>
                </a>
              </div>
            {{else}}
              <p class="hint">Drag a user here to link a master</p>
            {{/each}}
            </div>
          <div class="info-row">
            <label>Type:</label>
            <select id="stand-type" name="system.bio.type">
              {{#each typeConfigs}}
                <option value="{{@key}}"
                {{#ifEquals system.bio.type @key}}selected{{/ifEquals}}>
                  {{this.label}}
                </option>
              {{/each}}
            </select>
          </div>
          {{> actor-class}}
          <div class="info-row">
            <label>Design:</label>
            <textarea name="system.bio.design"
                      rows="3"
                      placeholder="Enter design">{{system.bio.design}}</textarea>
          </div>
          <div class="info-row">
            <label>Ability:</label>
            <textarea name="system.bio.ability"
                      rows="3"
                      placeholder="Enter ability">{{system.bio.ability}}</textarea>
          </div>
        </div>
      </div>
      <!--  ─ Ability Description Tab ─ -->
      <div class="tab" data-tab="{{actor.system.bio.type}}" data-group="primary">
        <div class="ability-description">
          {{{system.bio.description}}}
        </div>
      </div>
    </section>
  </div>
</form>
